<section class="head-wrap" aria-label="Header Bereich">
  <!-- HERO -->
  <section class="hero" id="hero">
    <div class="hero__bg" id="heroBg" aria-hidden="true"></div>
    <!-- V9 Blaustich (genau wie dort) -->
    <div class="hero__tint" aria-hidden="true"></div>
  </section>

  <!-- 6 Kacheln (kein Scroller, keine extra Innen-Wrapper) -->
  <section class="tiles" aria-label="Zufalls-Artikelbilder">
    <div class="tile"><img id="tile1" alt=""></div>
    <div class="tile"><img id="tile2" alt=""></div>
    <div class="tile"><img id="tile3" alt=""></div>
    <div class="tile"><img id="tile4" alt=""></div>
    <div class="tile"><img id="tile5" alt=""></div>
    <div class="tile"><img id="tile6" alt=""></div>
  </section>
</section>

<style>
  /* nutzt das gleiche Padding wie im Titel (falls in index gesetzt), sonst fallback */
  :root{
    --title-pad: var(--title-padding, 32px);
    --radius-xl: 24px;
    --radius-lg: 18px;
    --shadow-soft: 0 18px 40px rgba(15, 23, 42, 0.12);
  }

  .head-wrap{
    padding: 26px var(--title-pad) 32px;
  }

  /* HERO Container (Größe/Position wie bisher) */
  .hero{
    border-radius: var(--radius-xl);
    overflow:hidden;
    position:relative;
    height: 40vh;           /* wie V9 random/intro feeling */
    min-height: 280px;
    background:#0f172a;
    box-shadow: var(--shadow-soft);
  }

  .hero__bg{
    position:absolute; inset:0;
    background-size: cover;
    background-position: center;
    transform: scale(1.02);
    filter: saturate(1.02);
  }

  /* V9 Blaustich: linear-gradient(135deg, rgba(15,23,42,0.78), rgba(15,23,42,0.6)) */
  .hero__tint{
    position:absolute; inset:0;
    background: linear-gradient(
      135deg,
      rgba(15, 23, 42, 0.78),
      rgba(15, 23, 42, 0.60)
    );
  }

  /* Unterer weißer Bereich (wie bisher) */
  .tiles{
    margin-top: 24px;
    border-radius: var(--radius-xl);
    background: rgba(247, 249, 252, 1);
    box-shadow: var(--shadow-soft);
    padding: 18px 22px;

    /* 6 gleichmäßige Kacheln */
    display:grid;
    grid-template-columns: repeat(6, minmax(0, 1fr));
    gap: 16px;

    /* Höhe/Look wie bisher „perfekt“ */
    min-height: 22vh;
  }

  /* einzelne Kachel */
  .tile{
    border-radius: var(--radius-lg);
    background:#fff;
    overflow:hidden;
    height: 100%;
    min-height: 160px;
  }

  /* Bilder ohne Radius (Radius sitzt am Container) */
  .tile img{
    width:100%;
    height:100%;
    display:block;
    object-fit: cover;
    border-radius: 0;
  }

  /* responsive: bricht sauber um, ohne abgeschnittene 1px Bilder */
  @media (max-width: 1100px){
    .tiles{ grid-template-columns: repeat(3, minmax(0, 1fr)); }
  }
  @media (max-width: 700px){
    .head-wrap{ padding-left: 18px; padding-right: 18px; }
    .tiles{ grid-template-columns: repeat(2, minmax(0, 1fr)); }
  }
</style>

<script>
  (function(){
    const BG_MANIFEST   = "image/hintergrund/manifest.json";
    const ITEM_MANIFEST = "Items/manifest.json";

    function uniqSample(arr, n){
      const a = Array.isArray(arr) ? arr.slice() : [];
      // Fisher-Yates shuffle (einmal), dann slice => garantiert keine Duplikate
      for(let i=a.length-1; i>0; i--){
        const j = Math.floor(Math.random()*(i+1));
        [a[i], a[j]] = [a[j], a[i]];
      }
      return a.slice(0, Math.min(n, a.length));
    }

    async function readJson(url){
      const r = await fetch(url, { cache: "no-store" });
      if(!r.ok) throw new Error(url + " -> " + r.status);
      return r.json();
    }

    async function boot(){
      // HERO Hintergrund
      try{
        const bg = await readJson(BG_MANIFEST);
        const bgList = (bg && Array.isArray(bg.images)) ? bg.images : [];
        const heroOne = uniqSample(bgList, 1)[0];
        if(heroOne){
          document.getElementById("heroBg").style.backgroundImage = `url("${heroOne}")`;
        }
      }catch(e){
        console.error("BG manifest fail:", e);
      }

      // 6 Item-Bilder
      try{
        const it = await readJson(ITEM_MANIFEST);
        const itemList = (it && Array.isArray(it.images)) ? it.images : [];
        const picks = uniqSample(itemList, 6);

        for(let i=0; i<6; i++){
          const imgEl = document.getElementById("tile"+(i+1));
          const src = picks[i];
          if(src){
            imgEl.src = src;
            imgEl.alt = "Artikelbild";
          }else{
            // falls weniger als 6 vorhanden: leere Kachel bleibt weiß
            imgEl.removeAttribute("src");
            imgEl.alt = "";
          }
        }
      }catch(e){
        console.error("ITEM manifest fail:", e);
      }
    }

    boot();
  })();
</script>
